# Ignore maximize requests from apps. You'll probably like this.
windowrule {
    name = suppress-maximize-all
    match:class = .*
    suppress_event = maximize
}

# Default opacity for all windows
windowrule {
    name = default-opacity
    match:class = .*
    opacity = 0.97 0.9
}

# Fix some dragging issues with XWayland
windowrule {
    name = xwayland-drag-fix
    match:class = ^$
    match:title = ^$
    match:xwayland = 1
    match:float = 1
    match:fullscreen = 0
    match:pin = 0
    no_focus = on
}

# Terminal rules
windowrule {
    name = terminal-tag
    match:class = (Alacritty|kitty|com.mitchellh.ghostty)
    tag = +terminal
}

# Browser-specific rules
windowrule {
    name = chromium-browser-tag
    match:class = ([cC]hrom(e|ium)|[bB]rave-browser|Microsoft-edge|Vivaldi-stable)
    tag = +chromium-based-browser
}

windowrule {
    name = firefox-browser-tag
    match:class = ([fF]irefox|zen|librewolf)
    tag = +firefox-based-browser
}

windowrule {
    name = chromium-tile
    match:tag = chromium-based-browser
    tile = on
}

windowrule {
    name = chromium-opacity
    match:tag = chromium-based-browser
    opacity = 1 0.97
}

windowrule {
    name = firefox-opacity
    match:tag = firefox-based-browser
    opacity = 1 0.97
}

windowrule {
    name = video-sites-opaque
    match:initial_title = ((?i)(?:[a-z0-9-]+\.)*youtube\.com_/|app\.zoom\.us_/wc/home)
    opacity = 1.0 1.0
}

# Floating windows (dialogs, settings, etc.)
windowrule {
    name = floating-window-float
    match:tag = floating-window
    float = on
}

windowrule {
    name = floating-window-center
    match:tag = floating-window
    center = on
}

windowrule {
    name = floating-window-size
    match:tag = floating-window
    size = 800 600
}

windowrule {
    name = floating-apps-tag
    match:class = (blueberry.py|Impala|Wiremix|org.gnome.NautilusPreviewer|com.gabm.satty|Omarchy|About|TUI.float)
    tag = +floating-window
}

windowrule {
    name = file-dialogs-tag
    match:class = (xdg-desktop-portal-gtk|sublime_text|DesktopEditors|org.gnome.Nautilus)
    match:title = ^(Open.*Files?|Open [F|f]older.*|Save.*Files?|Save.*As|Save|All Files)
    tag = +floating-window
}

# No transparency on media windows
windowrule {
    name = media-opaque
    match:class = ^(zoom|vlc|mpv|org.kde.kdenlive|com.obsproject.Studio|com.github.PintaProject.Pinta|imv|org.gnome.NautilusPreviewer)$
    opacity = 1 1
}

# Fullscreen screensaver
windowrule {
    name = screensaver-fullscreen
    match:class = Screensaver
    fullscreen = on
}

# Pin workspaces to specific monitors
workspace = 1, monitor:DP-3, default:true  # bottom center
workspace = 2, monitor:DP-2  # top center
workspace = 3, monitor:DP-1  # left vertical
workspace = 4, monitor:DP-4  # right vertical
workspace = 5, monitor:DP-1  # left vertical

# Floating workspace for casual use
workspace = 10, monitor:DP-3

windowrule {
    name = workspace-10-float
    match:workspace = 10
    float = on
}

windowrule {
    name = workspace-10-position
    match:workspace = 10
    move = 200 200
}

windowrule {
    name = workspace-10-size
    match:workspace = 10
    size = 700 1000
}

# Steam window fixes
windowrule {
    name = steam-empty-focus
    match:title = ^()$
    match:class = ^(steam)$
    stay_focused = on
}

windowrule {
    name = steam-empty-minsize
    match:title = ^()$
    match:class = ^(steam)$
    min_size = 1 1
}

# App-specific workspace assignments
windowrule {
    name = firefox-workspace
    match:class = ([Ff]irefox)
    workspace = 2
}

windowrule {
    name = spotify-workspace
    match:class = ([Ss]potify)
    workspace = 3
}

windowrule {
    name = discord-workspace
    match:class = ([Dd]iscord)
    workspace = 4
}

windowrule {
    name = obsidian-workspace
    match:class = (obsidian)
    workspace = 5
}
